(this.webpackJsonpboilerplate=this.webpackJsonpboilerplate||[]).push([[0],{206:function(e,t,a){},208:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(44),o=a.n(c),s=a(22),l=a(46),i=a(13);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var m=a(6),u=a(93),d=a(94),p=a(212),_=a(97),g=a(26),E={getFromStorage:function(e){return JSON.parse(localStorage.getItem(e))},updateInStorage:function(e,t){return localStorage.setItem(e,JSON.stringify(Object(g.a)({},(void 0).getFromStorage,{},t)))},saveToStorage:function(e,t){return localStorage.setItem(e,JSON.stringify(t))}},f=Object({NODE_ENV:"production",PUBLIC_URL:"/assets"}).REACT_APP_API_URL,b={projects:"".concat(f,"/projects"),getUserData:"".concat(f,"/users/me")},h=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=b[e],a=E.getFromStorage("user")||{},n=a.access_token,r=a.token_type,c=new Headers;return c.append("Content-Type","application/json; charset=utf-8"),c.append("Accept","application/json"),n&&c.append("Authorization","".concat(r||"Bearer"," ").concat(n)),new Promise((function(e,a){return fetch(t,{method:"GET"}).then((function(t){t.ok,e(t.json())})).catch((function(e){a(e)}))}))},v={data:[]},N=Object({NODE_ENV:"production",PUBLIC_URL:"/assets"}).REACT_APP_API_URL,k=function(e){return function(t){return function(e){var t=new FormData;return Object.keys(e).forEach((function(a){t.append(a,e[a])})),new Promise((function(e,a){return fetch("".concat(N,"/users/sign_in"),{method:"POST",body:t}).then((function(t){t.ok||a(t),e(t.json())})).catch((function(e){console.log(e),a(e)}))}))}(e).then((function(e){if(e)return t({type:"USER_SIGN_IN",payload:e}),E.saveToStorage("user",e),e})).catch((function(e){console.warn(e)}))}},P=E.getFromStorage("user"),j=Object(m.combineReducers)({projects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROJECTS_FETCH_DATA":return Object(g.a)({},e,{data:Object(_.a)(t.payload)});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_SIGN_IN":return Object(g.a)({},e,{},t.payload);case"USER_GET_INFO":return Object(g.a)({},e);default:return e}},form:p.a}),S=Object(m.createStore)(j,Object(d.composeWithDevTools)(Object(m.applyMiddleware)(u.a,null)));window.snapSaveState=function(){return{__PRELOADED_STATE__:S.getState()}};var O=S,y=a(21),w=a.n(y),I=function(e){var t=e.menu;return r.a.createElement("ul",{className:"menu"},t.map((function(e){return r.a.createElement("li",{key:e.name,className:w()("menu__item",{menu__expandable:e.childrenItems})},e.childrenItems?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"menu__link"},r.a.createElement("span",{className:"menu__icon-holder"},r.a.createElement("i",{className:"mi-".concat(e.icon)})),r.a.createElement("span",{className:"menu__title"},e.name),e.badge?r.a.createElement("span",{className:"badge"},e.badge):null),r.a.createElement("ul",{className:"menu__sub-menu"},e.childrenItems.map((function(e){return r.a.createElement("li",{className:"menu__subItem",key:e.name},r.a.createElement(s.b,{to:e.link},e.name))})))):r.a.createElement(s.b,{to:e.link,className:"menu__link"},r.a.createElement("span",{className:"menu__icon-holder"},r.a.createElement("i",{className:"mi-".concat(e.icon)})),r.a.createElement("span",{className:"menu__title"},e.name)))})))};I.defaultProps={menu:[{name:"Projects",icon:"project",childrenItems:[{name:"Projects",link:"/admin/project_tasks"},{name:"Invoices",link:"/admin/tasks/invoices"}]},{name:"Quotes",icon:"quotes",childrenItems:[{name:"Pending",link:"/admin/estimators"},{name:"Approved",link:"/admin/estimators_approved"},{name:"Finished",link:"/admin/estimators_finished"},{name:"Archive",link:"/admin/estimators_archive"}]},{name:"Tracker",icon:"tracker",link:"/admin/tracker"},{name:"Contractors",icon:"contractors",badge:35,childrenItems:[{name:"Contractors",link:"/admin/contracts"},{name:"Astra Team",link:"/admin/approved_team"},{name:"Fleet",link:"/admin/vehicle"},{name:"Equipment",link:"/admin/equipment"}]},{name:"Properties",icon:"properties",link:"https://properties.astra-management.ca/"},{name:"Settings",icon:"project",childrenItems:[{name:"Permissions",link:"/admin/permissions"},{name:"Emails",link:"/admin/settings"},{name:"Categories",link:"/admin/estimator_types"},{name:"Estimators",link:"/admin/estimator_types"}]}]};var T=I,A=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header__container clearfix"},r.a.createElement("div",{className:"header__logo-wrapper"},r.a.createElement(s.b,{to:"/"},r.a.createElement("div",{className:"header__logo"}))),r.a.createElement("div",{className:"delimiter"}),r.a.createElement(T,null),r.a.createElement("div",{className:"header__logout"},r.a.createElement(s.b,{to:"/users/sign_out",className:"header__logout-icon"}))))},x=a(209),C=a(211),R=a(210),U=Object(R.a)({form:"signIn"})((function(e){var t=e.handleSubmit,a=e.pristine,n=e.submitting;return r.a.createElement(x.a,{onSubmit:t},r.a.createElement("h1",null,"Please Sign In"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("label",null,"Email"),r.a.createElement("div",null,r.a.createElement(C.a,{name:"email",component:"input",type:"email",placeholder:"Email"}))),r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("label",null,"Password"),r.a.createElement("div",null,r.a.createElement(C.a,{name:"password",component:"input",type:"password",placeholder:"Password"}))),r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("button",{type:"submit",disabled:a||n},"Submit"))))})),H=Object(i.b)((function(){return{}}),(function(e){return{signUp:function(t){return e(k(t))}}}))((function(e){var t=e.signUp;return r.a.createElement("div",null,r.a.createElement(U,{onSubmit:function(e){return t(e)}}))})),D=function(e){var t=e.children;return Object(i.c)((function(e){return e.user||{}})).access_token?t:r.a.createElement(H,null)};a(206);var F=function(){return r.a.createElement("div",{className:"page__container"},r.a.createElement("h1",null,"This is home page"))},B=a(48),G=function(e){e.previousPage,e.canPreviousPage,e.nextPage,e.canNextPage;var t=e.pageIndex,a=(e.pageSize,e.pageOptions),n=e.gotoPage,c=a.fill(""),o=c.map((function(e,a){return r.a.createElement("li",{className:w()("pagination__item",{"pagination__item--active":t===a}),key:a},r.a.createElement("button",{onClick:function(){return n(a)},className:"page"},a+1))}));return r.a.createElement("section",null,r.a.createElement("div",{className:"pagination"},r.a.createElement("ul",{className:"pages"},o)),r.a.createElement("div",{className:"pagination__amount"},"Showing ".concat(t+1," of ").concat(c.length," entries")))},J=function(e){var t=e.columns,a=e.data,n=Object(B.c)({columns:t,data:a},B.b,B.a),c=n.getTableProps,o=n.getTableBodyProps,s=n.headerGroups,l=n.page,i=n.prepareRow,m=n.nextPage,u=n.previousPage,d=n.canPreviousPage,p=n.canNextPage,_=n.pageOptions,g=n.gotoPage,E=n.state,f=E.pageIndex,b=E.pageSize;return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",Object.assign({},c(),{className:"table"}),r.a.createElement("thead",null,s.map((function(e,t){return r.a.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{key:t}),e.headers.map((function(e,t){return r.a.createElement("th",Object.assign({key:t},e.getHeaderProps(e.getSortByToggleProps()),{className:w()("table__header",{"table__header--boldText":e.isSorted})}),e.render("Header"),r.a.createElement("span",{className:w()("table__sort-icon",{"table__sort-icon--top":e.isSorted&&e.isSortedDesc,"table__sort-icon--bot":e.isSorted&&!e.isSortedDesc})}))})))}))),r.a.createElement("tbody",o(),l.map((function(e,t){return i(e),r.a.createElement("tr",Object.assign({},e.getRowProps(),{className:"table__row",key:t}),e.cells.map((function(e,t){return r.a.createElement("td",Object.assign({key:t},e.getCellProps(),{className:w()("table__cell",{"table__cell--bold":e.column.boldText})}),"Actions"===e.column.Header?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"table__icon",onClick:function(){return alert("add ".concat(e.row.values.id))}},r.a.createElement("i",{className:"add-project__icon"},r.a.createElement("span",{className:"add-1"}),r.a.createElement("span",{className:"add-2"}))),r.a.createElement("button",{className:"table__icon",onClick:function(){return alert("edit ".concat(e.row.values.id))}},r.a.createElement("i",{className:"edit-project__icon"})),r.a.createElement("button",{className:"table__icon",onClick:function(){return alert("delete ".concat(e.row.values.id))}},r.a.createElement("i",{className:"delete-project__icon"}))):null,"Status"===e.column.Header?e.value?r.a.createElement("span",{className:"table__status table__status--active"},"Active"):r.a.createElement("span",{className:"table__status table__status--inactive"},"Inactive"):e.render("Cell"))})))})))),r.a.createElement(G,{nextPage:m,previousPage:u,canPreviousPage:d,canNextPage:p,pageIndex:f,pageSize:b,pageOptions:_,gotoPage:g}))},L=[{component:function(e){var t=e.route;return r.a.createElement(D,null,r.a.createElement(A,null),r.a.createElement("main",{className:"page-content"},Object(l.a)(t.routes)))},routes:[{path:"/",exact:!0,component:function(){return r.a.createElement(F,{someParams:{userSomething:"some parameters"}})}},{path:"/admin/project_tasks",component:Object(i.b)((function(e){return{projects:e.projects.data}}),(function(e){return{fetchData:function(){return e((function(e){return h("projects").then((function(t){if(t){var a=t.map((function(e){return e.project_task}));return e({type:"PROJECTS_FETCH_DATA",payload:a}),t}})).catch((function(e){console.warn(e)}))}))},getUserInfo:function(){return e((function(e){return h("getUserData").then((function(t){if(t)return e({type:"USER_GET_INFO",payload:t}),t})).catch((function(e){console.warn(e)}))}))}}}))((function(e){var t=e.fetchData,a=e.projects,c=e.getUserInfo,o=r.a.useMemo((function(){return[{Header:"#",accessor:"id"},{Header:"Project Name",accessor:"name",boldText:!0},{Header:"Address",accessor:"address"},{Header:"Tasks",accessor:"number"},{Header:"Type",accessor:"type_pt"},{Header:"Status",accessor:"active"},{Header:"Actions"}]}),[]);Object(n.useEffect)((function(){t()}),[t]);var s=r.a.useMemo((function(){return a}),[a]);return r.a.createElement("div",{className:"page__container"},r.a.createElement("h1",null,"This is Projects page"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return c()}},"Test if user credentials works"),r.a.createElement("br",null),r.a.createElement(J,{columns:o,data:s}))}))},{path:"/admin/tasks/invoices",component:function(){return r.a.createElement("div",null,"and i am Invoices")}}]}];o.a.render(r.a.createElement((function(){return r.a.createElement(i.a,{store:O},r.a.createElement(s.a,null,Object(l.a)(L)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},99:function(e,t,a){e.exports=a(208)}},[[99,1,2]]]);